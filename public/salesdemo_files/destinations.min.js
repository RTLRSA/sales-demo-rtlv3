(function(){
  function segmentGa(){
    return window.analytics &&
      typeof window.analytics.ready === 'function' &&
      window.analytics.Integrations &&
      typeof window.analytics.Integrations['Google Analytics'] === 'function';
  }

  var existingGa = window[window['GoogleAnalyticsObject'] || 'ga'];
  if (typeof existingGa != 'function' && !(segmentGa())){
    (function(){
      var w = window,
          d = document,
          s = 'script',
          g = 'https://www.google-analytics.com/analytics.js',
          o = 'ga',
          e = d.createElement(s),
          f = d.getElementsByTagName(s)[0];
      e.async=1;
      e.src=g;
      w['GoogleAnalyticsObject'] = o;
      w[o] = w[o] || function(){
        (w[o].q=w[o].q||[]).push(arguments)
      },
      w[o].l = 1 * new Date();
      f.parentNode.insertBefore(e,f);
    })();
  }

  function onReady(a,b,c){b=document,c='addEventListener'; b[c] ? b[c]('DOMContentLoaded',a) : window.attachEvent('onload',a)}

  var properties = [];

  function trackClearbitMappings() {
    var ga = window[window['GoogleAnalyticsObject'] || 'ga'];

    properties.forEach(function(property) {
      var trackerName = property.name + '_Clearbit';

      ga('create', property.id, 'auto', trackerName);

      for (var key in property.mapping) {
        if (key && property.mapping[key]) {
          ga(trackerName + '.set', key, property.mapping[key]);
        }
      }

      ga(trackerName+'.send',
        'event',
        'Clearbit',
        'Enriched',
        'Clearbit Enriched',
        { nonInteraction: true }
      );
    });
  }

  var applyToAnalytics = function() {
    var tryApply = function() {
      var ga = window[window['GoogleAnalyticsObject'] || 'ga'];
      return typeof ga === 'function';
    }
    if (tryApply()) {
      // Native support
      trackClearbitMappings();
    } else if (segmentGa()) {
      // Segment support
      analytics.ready(tryApply);
      analytics.ready(function(){
        trackClearbitMappings();
      });
    } else {
      console.error("Clearbit error: 'ga' variable not found.");
    }
  }

  if (document.readyState === "complete"
  || document.readyState === "loaded"
  || document.readyState === "interactive") {
    applyToAnalytics();
  } else {
    onReady(applyToAnalytics);
  }
}());(function() {
  function logError(error) {
    if (console && console.error) {
      console.error(error);
    } else if (console && console.log) {
      console.log(error);
    }
  }

  try {
    var gaKey = window["GoogleAnalyticsObject"] || "ga";
    var ga = window[gaKey];
    if (ga) {
      if (typeof ga.getAll === "function") {
        ga.getAll().forEach(function(tracker) {
          tracker.send("event", {
            eventCategory: "SegmentMatches",
            eventAction: "ClearbitSegmentMatch",
            eventLabel: "013ec755-477c-4bad-9552-44b87536fd0f",
            nonInteraction: true
          });
        });
      } else {
        ga("send", "event", {
          eventCategory: "SegmentMatches",
          eventAction: "ClearbitSegmentMatch",
          eventLabel: "013ec755-477c-4bad-9552-44b87536fd0f",
          nonInteraction: true
        });
      }
    }
    if (window.gtag) {
      window.gtag("event", "ClearbitSegmentMatch", {
        event_category: "SegmentMatches",
        event_label: "013ec755-477c-4bad-9552-44b87536fd0f"
      });
    }
  } catch (error) {
    logError(error);
  }
})();(function() {
  function logError(error) {
    if (console && console.error) {
      console.error(error);
    } else if (console && console.log) {
      console.log(error);
    }
  }

  try {
    var gaKey = window["GoogleAnalyticsObject"] || "ga";
    var ga = window[gaKey];
    if (ga) {
      if (typeof ga.getAll === "function") {
        ga.getAll().forEach(function(tracker) {
          tracker.send("event", {
            eventCategory: "SegmentMatches",
            eventAction: "ClearbitSegmentMatch",
            eventLabel: "85d392fa-dc97-491e-b4f3-0977e6f241db",
            nonInteraction: true
          });
        });
      } else {
        ga("send", "event", {
          eventCategory: "SegmentMatches",
          eventAction: "ClearbitSegmentMatch",
          eventLabel: "85d392fa-dc97-491e-b4f3-0977e6f241db",
          nonInteraction: true
        });
      }
    }
    if (window.gtag) {
      window.gtag("event", "ClearbitSegmentMatch", {
        event_category: "SegmentMatches",
        event_label: "85d392fa-dc97-491e-b4f3-0977e6f241db"
      });
    }
  } catch (error) {
    logError(error);
  }
})();